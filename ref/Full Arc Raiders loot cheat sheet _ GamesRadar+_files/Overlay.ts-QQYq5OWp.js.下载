var e,n,t,o;import{g as i,s as r}from"../../cookies-Btke1V1y.js";const l="FTR_Article_PageView";if((null==(n=null==(e=window.reduxStore)?void 0:e.getState())?void 0:n.vanilla.isArticle)&&(null==(o=null==(t=window.vanilla.featureFlags.recirculation)?void 0:t.overlay)?void 0:o.enabled)){const e=i(l);r(e?{name:l,value:String(Number(e)+1),path:"/"}:{name:l,value:"1",path:"/"})}document.addEventListener("alpine:init",(()=>{Alpine.data("overlayDialog",(e=>({open:!1,modalElement:null,init(){var n,t,o;this.modalElement=this.$el;const r=new URLSearchParams(window.location.search).get("recirc-icymi");if(this.$watch("open",(e=>document.documentElement.classList.toggle("overflow-hidden",e))),"open"===r)return this.open=!0,void(this.modalElement.style.display="");if("1"!==i(l))return;if(document.referrer&&new URL(document.referrer).host===location.host)return;let a=!1,c=!1,d=location.hash,s=location.href;const u=()=>{c&&a&&(window.dispatchOrQueueAction("freyr.sendEventToFreyr",{name:"elementInteraction",eventObject:{element:{action:"exit",name:"recirculation-icymi",label:null,url:document.URL}}}),window.removeEventListener("pointerdown",m),window.removeEventListener("scroll",m),window.removeEventListener("keydown",m),window.history.pushState(null,"",window.location.href))},w=setTimeout((()=>{a=!0,u(),clearTimeout(w)}),(null==(o=null==(t=null==(n=window.vanilla.featureFlags)?void 0:n.recirculation)?void 0:t.overlay)?void 0:o.minimumPageViewDuration)??5e3),m=()=>{c||(c=!0,u())};window.addEventListener("pointerdown",m,{once:!0}),window.addEventListener("scroll",m,{once:!0,passive:!0}),window.addEventListener("keydown",m,{once:!0});const v=()=>{this.open=!0},h=n=>{c&&a&&!this.open&&(n.preventDefault(),window.dispatchOrQueueAction("freyr.sendEventToFreyr",{name:"elementInteraction",eventObject:{element:{action:"show",name:"recirculation-icymi",label:e,url:document.URL}}}),window.dispatchEvent(new CustomEvent("Show ICYMI")),v(),window.removeEventListener("popstate",p))},p=e=>{(()=>{const e=location.hash;if(d!==e)return d=e,!0;if(d===e&&""!==e)return!0;const n=location.href;return s===n?(s=n,!0):(d=e,!1)})()||h(e)};window.addEventListener("popstate",p)},closeDialog(){this.modalElement.style.display="none",window.dispatchOrQueueAction("freyr.sendEventToFreyr",{name:"elementInteraction",eventObject:{element:{action:"exit",name:"recirculation-icymi",label:e,url:document.URL}}}),setTimeout((()=>{window.history.back()}),0)}})))}));
